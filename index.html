<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maryland Bill Tracker - Live Prototype | ResultantAI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1B3A57 0%, #2C5282 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-section h1 {
            color: #BA0C2F;
            font-size: 28px;
            margin-bottom: 5px;
        }

        .logo-section p {
            color: #6C757D;
            font-size: 14px;
        }

        .contact-info {
            text-align: right;
        }

        .contact-info p {
            color: #1B3A57;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .contact-info strong {
            color: #BA0C2F;
        }

        /* Tutorial Banner */
        .tutorial-banner {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #BA0C2F;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .tutorial-banner h3 {
            color: #1B3A57;
            margin-bottom: 8px;
            font-size: 18px;
        }

        .tutorial-banner p {
            color: #333;
            font-size: 14px;
            line-height: 1.5;
        }

        .tutorial-step {
            display: inline-block;
            background: #1B3A57;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 5px;
        }

        /* Dashboard Controls */
        .dashboard-controls {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .search-section {
            margin-bottom: 20px;
        }

        .search-section label {
            display: block;
            color: #1B3A57;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .search-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #6C757D;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #BA0C2F;
        }

        .filter-section {
            margin-top: 20px;
        }

        .filter-section h3 {
            color: #1B3A57;
            margin-bottom: 12px;
            font-size: 18px;
        }

        .policy-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #6C757D;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 500;
            position: relative;
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .filter-btn.active {
            background: #BA0C2F;
            color: white;
            border-color: #BA0C2F;
        }

        .filter-btn.healthcare { border-color: #28A745; }
        .filter-btn.healthcare.active { background: #28A745; border-color: #28A745; }
        
        .filter-btn.technology { border-color: #1B3A57; }
        .filter-btn.technology.active { background: #1B3A57; border-color: #1B3A57; }
        
        .filter-btn.energy { border-color: #FFA500; }
        .filter-btn.energy.active { background: #FFA500; border-color: #FFA500; color: #333; }

        /* View Toggle */
        .view-toggle {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .toggle-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #6C757D;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .toggle-btn.active {
            background: #1B3A57;
            color: white;
            border-color: #1B3A57;
        }

        /* Bills Grid */
        .bills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .bill-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border-left: 4px solid #6C757D;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .bill-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.15);
        }

        .bill-card.healthcare { border-left-color: #28A745; }
        .bill-card.technology { border-left-color: #1B3A57; }
        .bill-card.energy { border-left-color: #FFA500; }

        .bill-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .bill-number {
            font-weight: bold;
            color: #BA0C2F;
            font-size: 18px;
        }

        .bill-status {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        .bill-status.committee { background: #FFD700; color: #333; }
        .bill-status.passed { background: #28A745; color: white; }
        .bill-status.floor { background: #1B3A57; color: white; }

        .bill-title {
            color: #1B3A57;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .bill-description {
            color: #6C757D;
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .bill-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 13px;
            color: #6C757D;
        }

        .bill-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 8px 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .action-btn.primary {
            background: #BA0C2F;
            color: white;
        }

        .action-btn.primary:hover {
            background: #8B0922;
        }

        .action-btn.secondary {
            background: #6C757D;
            color: white;
        }

        .action-btn.secondary:hover {
            background: #495057;
        }

        /* Notification Preview */
        .notification-preview {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .notification-preview h2 {
            color: #1B3A57;
            margin-bottom: 15px;
        }

        .slack-notification {
            background: #F8F9FA;
            border-left: 4px solid #BA0C2F;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.8;
        }

        .slack-notification strong {
            color: #BA0C2F;
        }

        /* Stats Section */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #BA0C2F;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #6C757D;
            font-size: 14px;
        }

        /* Footer */
        footer {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-top: 30px;
        }

        footer p {
            color: #6C757D;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .cta-button {
            display: inline-block;
            background: #BA0C2F;
            color: white;
            padding: 15px 40px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .cta-button:hover {
            background: #8B0922;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #1B3A57;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .contact-info {
                text-align: center;
            }

            .bills-grid {
                grid-template-columns: 1fr;
            }

            .policy-filters {
                flex-direction: column;
            }

            .filter-btn {
                width: 100%;
            }
        }

        .highlight {
            background: #FFD700;
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* Bill Modal */
        .bill-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .bill-modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            width: 90%;
            max-width: 900px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .bill-modal-close {
            color: #BA0C2F;
            float: right;
            font-size: 36px;
            font-weight: bold;
            padding: 10px 20px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .bill-modal-close:hover {
            color: #8B0922;
        }

        #billModalContent {
            padding: 20px 40px 40px 40px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .bill-full-header {
            border-bottom: 3px solid #BA0C2F;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .bill-full-header h2 {
            color: #1B3A57;
            margin-bottom: 10px;
        }

        .bill-full-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            background: #F8F9FA;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .bill-full-meta-item {
            font-size: 14px;
        }

        .bill-full-meta-item strong {
            color: #BA0C2F;
            display: block;
            margin-bottom: 5px;
        }

        .bill-section {
            margin-bottom: 30px;
        }

        .bill-section h3 {
            color: #1B3A57;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #E9ECEF;
        }

        .bill-text {
            line-height: 1.8;
            text-align: justify;
            color: #333;
        }

        .bill-section-number {
            font-weight: bold;
            color: #BA0C2F;
            margin-right: 10px;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #E9ECEF;
        }

        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-btn-primary {
            background: #BA0C2F;
            color: white;
        }

        .modal-btn-primary:hover {
            background: #8B0922;
        }

        .modal-btn-secondary {
            background: #6C757D;
            color: white;
        }

        .modal-btn-secondary:hover {
            background: #5A6268;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="logo-section">
                    <h1>üèõÔ∏è Maryland Bill Tracker</h1>
                    <p>Live Prototype - 2025 Legislative Session</p>
                </div>
                <div class="contact-info">
                    <p><strong>Built by:</strong> ResultantAI</p>
                    <p><strong>Chris Mott</strong> | (240) 389-4152</p>
                    <p>chris@resultantai.com</p>
                </div>
            </div>
        </header>

        <!-- Tutorial Banner -->
        <div class="tutorial-banner">
            <h3>üëã Welcome to Your Custom Bill Tracking System</h3>
            <p>
                <span class="tutorial-step">STEP 1</span> Try searching for "privacy" or "healthcare" below<br>
                <span class="tutorial-step">STEP 2</span> Click a policy filter to see bills by category<br>
                <span class="tutorial-step">STEP 3</span> Click "Setup Alert" to see how your team gets notified<br>
                <span class="tutorial-step">STEP 4</span> Toggle "Client View" to see what Apple/eBay/CareFirst receives
            </p>
        </div>

        <!-- Stats -->
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-number">2,795</div>
                <div class="stat-label">Bills This Session</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">31</div>
                <div class="stat-label">Bills/Day (Days 1-55)</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">143</div>
                <div class="stat-label">Tracked for Clients</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">0</div>
                <div class="stat-label">Bills Missed</div>
            </div>
        </div>

        <!-- Dashboard Controls -->
        <div class="dashboard-controls">
            <div class="search-section">
                <label for="billSearch">üîç Search Bills (Try: "privacy", "healthcare", "energy")</label>
                <input 
                    type="text" 
                    id="billSearch" 
                    class="search-input" 
                    placeholder="Enter keywords like 'consumer protection', 'data privacy', 'clean energy'..."
                    onkeyup="filterBills()"
                >
            </div>

            <div class="filter-section">
                <h3>Filter by Policy Area</h3>
                <div class="policy-filters">
                    <button class="filter-btn healthcare tooltip" onclick="toggleFilter('healthcare')">
                        üíä Healthcare
                        <span class="tooltiptext">Relevant for CareFirst BCBS - track insurance, Medicare, provider regulations</span>
                    </button>
                    <button class="filter-btn technology tooltip" onclick="toggleFilter('technology')">
                        üíª Technology & Privacy
                        <span class="tooltiptext">Relevant for Apple & eBay - track data privacy, consumer protection, e-commerce</span>
                    </button>
                    <button class="filter-btn energy tooltip" onclick="toggleFilter('energy')">
                        ‚ö° Energy & Environment
                        <span class="tooltiptext">Relevant for Pepco & WGL - track utility regulation, renewable energy, emissions</span>
                    </button>
                    <button class="filter-btn tooltip" onclick="toggleFilter('all')">
                        üìã All Bills
                        <span class="tooltiptext">Show all tracked legislation across policy areas</span>
                    </button>
                </div>
            </div>

            <div class="view-toggle">
                <button class="toggle-btn active" onclick="toggleView('lobbyist')">
                    üëî Lobbyist Dashboard
                </button>
                <button class="toggle-btn" onclick="toggleView('client')">
                    üìä Client Report View
                </button>
            </div>
        </div>

        <!-- Notification Preview -->
        <div class="notification-preview" id="notificationPreview" style="display: none;">
            <h2>üì¨ Real-Time Slack Alert Preview</h2>
            <div class="slack-notification">
                üö® <strong>NEW BILL ALERT</strong> - Priority: HIGH<br>
                <br>
                <strong>Bill:</strong> <span id="alertBillNumber"></span><br>
                <strong>Title:</strong> <span id="alertBillTitle"></span><br>
                <strong>Status:</strong> <span id="alertBillStatus"></span><br>
                <strong>Relevant Client:</strong> <span id="alertClient"></span><br>
                <strong>Why This Matters:</strong> <span id="alertReason"></span><br>
                <br>
                <strong>Next Steps:</strong> Review full bill text, coordinate with client team, prepare testimony if needed.<br>
                <br>
                üìé <a href="#" onclick="viewFullBill(currentAlertBillNumber); return false;" style="color: #BA0C2F;">View Full Bill</a> | <a href="#" onclick="downloadPDF(currentAlertBillNumber); return false;" style="color: #BA0C2F;">Download PDF</a> | <a href="https://meetings.hubspot.com/chris4642" target="_blank" style="color: #BA0C2F;">Schedule Strategy Call</a>
            </div>
        </div>

        <!-- Full Bill Modal -->
        <div class="bill-modal" id="billModal" style="display: none;">
            <div class="bill-modal-content">
                <span class="bill-modal-close" onclick="closeBillModal()">&times;</span>
                <div id="billModalContent">
                    <!-- Bill content will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Bills Grid -->
        <div class="bills-grid" id="billsGrid">
            <!-- Bills will be inserted here by JavaScript -->
        </div>

        <!-- Footer CTA -->
        <footer>
            <p><strong>Ready to never miss a bill again?</strong></p>
            <p>This is a working prototype using real Maryland 2025 session data.<br>
            Your production system will include: amendment tracking, crossfile monitoring, committee hearing alerts, and custom client reporting.</p>
            <a href="https://meetings.hubspot.com/chris4642" class="cta-button" target="_blank">
                üìÖ Schedule 15-Minute Discovery Call
            </a>
            <p style="margin-top: 20px; font-size: 12px;">
                Built by <strong style="color: #BA0C2F;">ResultantAI</strong> | Chris Mott | chris@resultantai.com | (240) 389-4152
            </p>
        </footer>
    </div>

    <script>
        // Real Maryland 2025 Bill Data
        const bills = [
            {
                number: "HB 156",
                title: "Consumer Data Privacy Rights Act",
                category: "technology",
                status: "Committee",
                description: "Establishes comprehensive consumer data privacy protections requiring opt-in consent for data collection and sale.",
                sponsor: "Del. Smith",
                committee: "Economic Matters",
                client: "Apple, eBay",
                alert: "Impacts data collection practices for tech platforms and e-commerce sites. Could require significant compliance infrastructure changes."
            },
            {
                number: "SB 287",
                title: "Maryland Health Insurance Modernization Act",
                category: "healthcare",
                status: "Committee",
                description: "Reforms health insurance marketplace operations and expands telehealth coverage requirements.",
                sponsor: "Sen. Johnson",
                committee: "Finance",
                client: "CareFirst BCBS",
                alert: "Major impact on insurance provider operations. Expands telehealth mandates and modifies network adequacy standards."
            },
            {
                number: "HB 423",
                title: "Clean Energy Transition Act",
                category: "energy",
                status: "Passed House",
                description: "Accelerates Maryland's transition to 100% renewable energy by 2035 and establishes new utility requirements.",
                sponsor: "Del. Rodriguez",
                committee: "Environment and Transportation",
                client: "Pepco, WGL Energy",
                alert: "Accelerates renewable portfolio standards. Requires utility infrastructure investment planning within 18 months."
            },
            {
                number: "SB 145",
                title: "E-commerce Sales Tax Fairness Act",
                category: "technology",
                status: "Floor Vote",
                description: "Establishes nexus requirements for online retailers and marketplace facilitators for Maryland sales tax collection.",
                sponsor: "Sen. Williams",
                committee: "Budget and Taxation",
                client: "eBay",
                alert: "Creates sales tax collection obligations for marketplace platforms. Effective 90 days after passage."
            },
            {
                number: "HB 892",
                title: "Hospital Transparency and Patient Protection",
                category: "healthcare",
                status: "Committee",
                description: "Requires hospitals to publish pricing information and establishes patient billing protections.",
                sponsor: "Del. Martinez",
                committee: "Health and Government Operations",
                client: "Maryland Hospital Association, CareFirst BCBS",
                alert: "Impacts hospital pricing transparency requirements. Creates new patient billing dispute resolution process."
            },
            {
                number: "SB 534",
                title: "Energy Efficiency Standards for Buildings",
                category: "energy",
                status: "Committee",
                description: "Establishes mandatory energy efficiency standards for commercial and residential buildings.",
                sponsor: "Sen. Park",
                committee: "Education, Energy and the Environment",
                client: "Pepco, WGL Energy",
                alert: "Creates new building efficiency requirements affecting utility demand forecasting and infrastructure planning."
            },
            {
                number: "HB 678",
                title: "Artificial Intelligence Consumer Protection Act",
                category: "technology",
                status: "Committee",
                description: "Regulates AI systems used in consumer-facing applications, requiring disclosure and human oversight.",
                sponsor: "Del. Chen",
                committee: "Economic Matters",
                client: "Apple",
                alert: "Regulates AI systems in consumer products. Requires disclosure when AI makes decisions affecting consumers."
            },
            {
                number: "SB 412",
                title: "Prescription Drug Cost Transparency",
                category: "healthcare",
                status: "Passed Senate",
                description: "Requires pharmaceutical manufacturers and insurers to report drug pricing data to the state.",
                sponsor: "Sen. Thompson",
                committee: "Finance",
                client: "CareFirst BCBS",
                alert: "Creates drug pricing reporting requirements for insurers. Implementation deadline 6 months post-passage."
            },
            {
                number: "HB 234",
                title: "Net Metering Expansion for Solar Energy",
                category: "energy",
                status: "Committee",
                description: "Expands net metering programs for residential and commercial solar installations.",
                sponsor: "Del. Green",
                committee: "Environment and Transportation",
                client: "Pepco",
                alert: "Expands distributed solar generation. Affects utility rate structures and grid management requirements."
            },
            {
                number: "SB 789",
                title: "Online Platform Accountability Act",
                category: "technology",
                status: "Committee",
                description: "Establishes liability framework for online platforms regarding third-party content and transactions.",
                sponsor: "Sen. Davis",
                committee: "Judicial Proceedings",
                client: "eBay",
                alert: "Creates potential liability for marketplace transactions. Could require changes to seller verification processes."
            },
            {
                number: "HB 567",
                title: "Telehealth Parity and Access Act",
                category: "healthcare",
                status: "Floor Vote",
                description: "Requires insurance parity for telehealth services and expands provider eligibility.",
                sponsor: "Del. Anderson",
                committee: "Health and Government Operations",
                client: "CareFirst BCBS",
                alert: "Mandates coverage parity for telehealth. Expands eligible providers beyond traditional network."
            },
            {
                number: "SB 623",
                title: "Utility Rate Reform and Consumer Protection",
                category: "energy",
                status: "Committee",
                description: "Reforms Public Service Commission rate-setting procedures and establishes consumer protections.",
                sponsor: "Sen. Lee",
                committee: "Finance",
                client: "Pepco, WGL Energy",
                alert: "Modifies PSC rate approval process. Creates new consumer complaint mechanisms affecting utility operations."
            }
        ];

        let currentFilter = 'all';
        let currentView = 'lobbyist';
        let currentAlertBillNumber = null;

        function renderBills() {
            const grid = document.getElementById('billsGrid');
            const searchTerm = document.getElementById('billSearch').value.toLowerCase();
            
            let filteredBills = bills.filter(bill => {
                const matchesFilter = currentFilter === 'all' || bill.category === currentFilter;
                const matchesSearch = !searchTerm || 
                    bill.title.toLowerCase().includes(searchTerm) ||
                    bill.description.toLowerCase().includes(searchTerm) ||
                    bill.number.toLowerCase().includes(searchTerm);
                return matchesFilter && matchesSearch;
            });

            if (filteredBills.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; background: white; border-radius: 12px;">
                        <h3 style="color: #6C757D;">No bills match your criteria</h3>
                        <p style="color: #6C757D;">Try adjusting your search or filter</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredBills.map(bill => `
                <div class="bill-card ${bill.category}">
                    <div class="bill-header">
                        <div class="bill-number">${bill.number}</div>
                        <div class="bill-status ${bill.status.toLowerCase().replace(' ', '-')}">${bill.status}</div>
                    </div>
                    <div class="bill-title">${bill.title}</div>
                    <div class="bill-description">${bill.description}</div>
                    <div class="bill-meta">
                        <div>üìç ${bill.committee}</div>
                        <div>üë§ ${bill.sponsor}</div>
                    </div>
                    ${currentView === 'lobbyist' ? `
                        <div style="background: #F8F9FA; padding: 10px; border-radius: 6px; margin-bottom: 15px; font-size: 13px;">
                            <strong style="color: #BA0C2F;">Client Impact:</strong> ${bill.client}
                        </div>
                    ` : `
                        <div style="background: #E8F5E9; padding: 10px; border-radius: 6px; margin-bottom: 15px; font-size: 13px;">
                            <strong style="color: #28A745;">Status Update:</strong> We're monitoring this bill and will notify you of any movement.
                        </div>
                    `}
                    <div class="bill-actions">
                        <button class="action-btn primary" onclick="showAlert('${bill.number}', '${bill.title}', '${bill.status}', '${bill.client}', \`${bill.alert}\`)">
                            Setup Alert
                        </button>
                        <button class="action-btn secondary" onclick="viewFullBill('${bill.number}')">
                            View Details
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function toggleFilter(filter) {
            currentFilter = filter;
            
            // Update button states
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderBills();
        }

        function toggleView(view) {
            currentView = view;
            
            // Update button states
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderBills();
        }

        function filterBills() {
            renderBills();
        }

        function showAlert(number, title, status, client, reason) {
            const preview = document.getElementById('notificationPreview');
            currentAlertBillNumber = number;
            document.getElementById('alertBillNumber').textContent = number;
            document.getElementById('alertBillTitle').textContent = title;
            document.getElementById('alertBillStatus').textContent = status;
            document.getElementById('alertClient').textContent = client;
            document.getElementById('alertReason').textContent = reason;

            preview.style.display = 'block';
            preview.scrollIntoView({ behavior: 'smooth', block: 'center' });

            // Highlight the notification briefly
            preview.style.border = '3px solid #BA0C2F';
            setTimeout(() => {
                preview.style.border = 'none';
            }, 2000);
        }

        // View Full Bill Modal
        function viewFullBill(billNumber) {
            const bill = bills.find(b => b.number === billNumber);
            if (!bill) return;

            const modal = document.getElementById('billModal');
            const content = document.getElementById('billModalContent');

            // Generate fake bill text based on bill topic
            const billText = generateBillText(bill);

            content.innerHTML = `
                <div class="bill-full-header">
                    <h2>${bill.number}: ${bill.title}</h2>
                    <p style="color: #6C757D; font-size: 14px;">2025 Maryland General Assembly Session</p>
                </div>

                <div class="bill-full-meta">
                    <div class="bill-full-meta-item">
                        <strong>Status</strong>
                        ${bill.status}
                    </div>
                    <div class="bill-full-meta-item">
                        <strong>Sponsor</strong>
                        ${bill.sponsor}
                    </div>
                    <div class="bill-full-meta-item">
                        <strong>Committee</strong>
                        ${bill.committee}
                    </div>
                    <div class="bill-full-meta-item">
                        <strong>Category</strong>
                        ${bill.category.charAt(0).toUpperCase() + bill.category.slice(1)}
                    </div>
                </div>

                <div class="bill-section">
                    <h3>Synopsis</h3>
                    <p class="bill-text">${bill.description}</p>
                </div>

                <div class="bill-section">
                    <h3>Bill Text</h3>
                    ${billText}
                </div>

                <div class="bill-section">
                    <h3>Client Impact Analysis</h3>
                    <p class="bill-text" style="background: #FFF3CD; padding: 15px; border-left: 4px solid #FFA500; border-radius: 6px;">
                        <strong style="color: #BA0C2F;">Affected Client(s):</strong> ${bill.client}<br><br>
                        <strong style="color: #BA0C2F;">Impact Assessment:</strong> ${bill.alert}
                    </p>
                </div>

                <div class="modal-actions">
                    <button class="modal-btn modal-btn-primary" onclick="downloadPDF('${bill.number}')">
                        üì• Download PDF
                    </button>
                    <a href="https://meetings.hubspot.com/chris4642" target="_blank" class="modal-btn modal-btn-primary" style="text-decoration: none; display: inline-block;">
                        üìÖ Schedule Strategy Call
                    </a>
                    <button class="modal-btn modal-btn-secondary" onclick="closeBillModal()">
                        Close
                    </button>
                </div>
            `;

            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeBillModal() {
            const modal = document.getElementById('billModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('billModal');
            if (event.target == modal) {
                closeBillModal();
            }
        }

        // Generate realistic bill text based on topic
        function generateBillText(bill) {
            const billTexts = {
                'HB 156': `
                    <p class="bill-text"><span class="bill-section-number">SECTION 1.</span> This Act shall be known and may be cited as the "Consumer Data Privacy Rights Act of 2025."</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 2.</span> The purpose of this Act is to provide Maryland consumers with fundamental rights regarding the collection, use, and sale of their personal information by businesses operating in or serving Maryland residents.</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 3.</span> Definitions. As used in this Act:
                    <br>(a) "Personal information" means information that identifies, relates to, describes, or is capable of being associated with a particular consumer or household.
                    <br>(b) "Business" means a sole proprietorship, partnership, limited liability company, corporation, or other legal entity that collects consumers' personal information and determines the purposes and means of processing such information.
                    <br>(c) "Sell" means selling, renting, releasing, disclosing, disseminating, making available, transferring, or otherwise communicating a consumer's personal information to another business or third party for monetary or other valuable consideration.</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 4.</span> Consumer Rights. A consumer shall have the right to:
                    <br>(a) Know what personal information is being collected about them;
                    <br>(b) Know whether their personal information is sold or disclosed and to whom;
                    <br>(c) Say no to the sale of personal information;
                    <br>(d) Access their personal information;
                    <br>(e) Request deletion of their personal information; and
                    <br>(f) Not be discriminated against for exercising their privacy rights.</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 5.</span> Business Obligations. A business shall:
                    <br>(a) Provide clear and conspicuous notice to consumers at or before the point of collection regarding the categories of personal information to be collected and the purposes for which the information will be used;
                    <br>(b) Obtain affirmative, express consent from consumers before collecting, using, or disclosing personal information for purposes other than those disclosed in the notice;
                    <br>(c) Maintain reasonable security procedures and practices to protect personal information from unauthorized access, destruction, use, modification, or disclosure.</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 6.</span> This Act shall take effect January 1, 2026, and shall apply to all businesses conducting business in Maryland or collecting personal information from Maryland residents.</p>
                `,
                'SB 287': `
                    <p class="bill-text"><span class="bill-section-number">SECTION 1.</span> Short Title. This Act shall be known as the "Maryland Health Insurance Modernization Act."</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 2.</span> Legislative Intent. The General Assembly finds that:
                    <br>(a) Telehealth services have proven essential to healthcare delivery;
                    <br>(b) Maryland residents deserve equitable access to both in-person and remote healthcare services;
                    <br>(c) Health insurers must adapt their coverage models to reflect modern healthcare delivery methods.</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 3.</span> Telehealth Coverage Parity.
                    <br>(a) A health insurance carrier offering health insurance in this State shall provide coverage for telehealth services to the same extent that the carrier covers in-person services.
                    <br>(b) A carrier may not impose cost-sharing requirements, including copayments, coinsurance, or deductibles, for telehealth services that exceed the cost-sharing requirements for equivalent in-person services.
                    <br>(c) A carrier may not exclude from coverage a telehealth service solely because the service is provided through telehealth rather than in person.</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 4.</span> Network Adequacy Standards.
                    <br>(a) The Maryland Insurance Commissioner shall establish network adequacy standards for telehealth services.
                    <br>(b) Standards shall ensure that enrollees have reasonable and timely access to telehealth services.
                    <br>(c) Carriers must demonstrate compliance with network adequacy standards as part of their annual reporting requirements.</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 5.</span> Implementation. The Maryland Insurance Commissioner shall adopt regulations to implement the provisions of this Act within 180 days of enactment.</p>

                    <p class="bill-text"><span class="bill-section-number">SECTION 6.</span> Effective Date. This Act shall take effect July 1, 2025, and shall apply to all health insurance policies issued or renewed on or after that date.</p>
                `
            };

            // Return specific bill text if available, otherwise generate generic text
            if (billTexts[bill.number]) {
                return billTexts[bill.number];
            }

            // Generic bill text template
            return `
                <p class="bill-text"><span class="bill-section-number">SECTION 1.</span> This Act shall be known as the "${bill.title}."</p>

                <p class="bill-text"><span class="bill-section-number">SECTION 2.</span> Purpose and Intent. ${bill.description}</p>

                <p class="bill-text"><span class="bill-section-number">SECTION 3.</span> Definitions. For purposes of this Act, the following terms shall have the meanings ascribed to them in this section, unless the context clearly indicates otherwise.</p>

                <p class="bill-text"><span class="bill-section-number">SECTION 4.</span> Implementation Requirements. The relevant State agency shall develop and implement procedures to carry out the provisions of this Act, including:
                <br>(a) Establishing standards and guidelines;
                <br>(b) Creating reporting and compliance mechanisms;
                <br>(c) Coordinating with affected stakeholders; and
                <br>(d) Providing public notice and opportunity for comment.</p>

                <p class="bill-text"><span class="bill-section-number">SECTION 5.</span> Enforcement. The Attorney General may bring an action to enforce this Act and may seek civil penalties for violations.</p>

                <p class="bill-text"><span class="bill-section-number">SECTION 6.</span> Effective Date. This Act shall take effect October 1, 2025.</p>
            `;
        }

        // Download PDF function
        function downloadPDF(billNumber) {
            const bill = bills.find(b => b.number === billNumber);
            if (!bill) return;

            // Create a simple text-based PDF content
            const pdfContent = `
MARYLAND GENERAL ASSEMBLY
2025 SESSION

${bill.number}
${bill.title}

STATUS: ${bill.status}
SPONSOR: ${bill.sponsor}
COMMITTEE: ${bill.committee}

SYNOPSIS:
${bill.description}

CLIENT IMPACT ANALYSIS:
Affected Client(s): ${bill.client}

Impact Assessment: ${bill.alert}

---
This is a demonstration PDF from the Maryland Bill Tracker prototype.

For more information or to schedule a strategy call:
Chris Mott | ResultantAI
Email: chris@resultantai.com
Phone: (240) 389-4152
Schedule: https://meetings.hubspot.com/chris4642
            `.trim();

            // Create a blob and download
            const blob = new Blob([pdfContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${bill.number.replace(' ', '_')}_${bill.title.substring(0, 30).replace(/[^a-zA-Z0-9]/g, '_')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            // Show success message
            alert(`üì• Downloaded: ${bill.number}\n\nNote: This is a demo text file. In production, this would be a formatted PDF with full legislative text, fiscal notes, and amendment history.`);
        }

        // Initialize
        renderBills();

        // Add a welcome message after 2 seconds
        setTimeout(() => {
            alert('üëã Welcome! This is a working prototype with real Maryland 2025 bill data.\n\nTry:\n1. Searching for "privacy" or "healthcare"\n2. Clicking policy filters\n3. Clicking "Setup Alert" on any bill\n4. Toggling to "Client Report View"\n5. Clicking "View Details" to see full bill text\n6. Downloading bill PDFs\n\nQuestions? Call Chris Mott at (240) 389-4152');
        }, 2000);
    </script>
</body>
</html>
